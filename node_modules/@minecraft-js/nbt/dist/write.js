"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeNBT = void 0;
const bufwrapper_1 = require("@minecraft-js/bufwrapper");
const node_zlib_1 = require("node:zlib");
function writeNBT(compound, options) {
    options = options ?? {};
    const buf = new bufwrapper_1.BufWrapper(null, { oneConcat: true });
    compound.write(buf);
    buf.finish();
    let buffer = buf.buffer;
    switch (options.compression) {
        case 'gzip':
            buffer = (0, node_zlib_1.gzipSync)(buffer);
            break;
        case 'zlib':
            buffer = (0, node_zlib_1.deflateSync)(buffer);
            break;
        case 'uncompressed':
        default:
            break;
    }
    return buffer;
}
exports.writeNBT = writeNBT;
